import wollok.game.*
import example.*

program pacmanGame {
	
	game.title("Pacman!")
	
	// límites del juego
	game.width(14)
	game.height(8)

	const rivales = [fantasmaRojo, fantasmaAzul]
	
	// fondo
	game.boardGround("pacmanBackground.jpg")
	
	// personaje principal
	game.addVisualCharacter(pacman)

	/*Hecho en clase*/

	keyboard.w().onPressDo({pacman.moverseHaciaArriba()})
	keyboard.s().onPressDo({pacman.moverseHaciaAbajo()})
	keyboard.a().onPressDo({pacman.moverseHaciaIzquierda()})
	keyboard.d().onPressDo({pacman.moverseHaciaDerecha()})



	game.addVisual(fantasmaRojo)
	game.addVisual(fantasmaAzul)

	/*
	game.whenCollideDo(fantasmaRojo, {
		personaje => 
		personaje.position(game.origin())
		personaje.perderVida()
		game.say(personaje,"Me quedan " + personaje.vidas() + " vidas. ")
		})
	*/

	rivales.forEach({
		rival => game.whenCollideDo(rival, {
			personaje =>
			personaje.perderVida()
			game.say(personaje,"Me quedan " + personaje.vidas() + " vidas. ")
		})
	

	})


	//game.say(personaje,"Me quedan" + personaje.vidas() + "vidas.")
	/*Hecho en clase*/
	

	/*
	// rivales
	const rivales = [new Rival(numero = 1), new Rival(numero = 2)]
	
	rivales.forEach { rival => 
		game.addVisual(rival)
		game.whenCollideDo(rival, { personaje =>
			personaje.perderVida()
			game.say(pacman, "Ups! Perdí una vida")
			if (personaje.juegoTerminado()) {
				game.say(pacman, "Se me terminaron las vidas!!!")
				game.onTick(5000, "gameEnd", { game.stop() })
			}
		})
	}
	*/
	
	
	// que arranque el juego!
	game.start()
	
	
}